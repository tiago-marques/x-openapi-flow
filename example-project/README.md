# x-openapi-flow Local Example Project

This folder simulates a kickstart project with standard Swagger (OAS3) and Swagger UI.

## Overview

This example is designed to demonstrate the expected workflow:

- Keep a base OpenAPI spec in the project root (`swagger.json`) without `x-openapi-flow`
- Generate a dedicated sidecar file with only library data via `npx x-openapi-flow init`
- Apply sidecar data into a full OpenAPI output via `npx x-openapi-flow apply`

## Minimal Dependencies

- `express` (HTTP server for local Swagger UI)
- `swagger-ui-express` (Swagger UI integration)
- `x-openapi-flow` (local CLI package under test)

## Project Files

- `swagger.json`: base OpenAPI (market-standard project root file)
- `swagger-openapi-flow.json`: sidecar generated by `init` (library-only data)
- `examples/order-openapi-flow.yaml`: populated sidecar example (library-only content)
- `examples/order-openapi-flow.json`: populated sidecar example (library-only content)

Naming convention:

- `{context}-openapi-flow.yaml`
- `{context}-swagger-flow.json`

## Setup

### 1) Install dependencies

```bash
cd example-project
npm install
```

### 2) Start Swagger UI

```bash
npm start
```

Open:

- http://localhost:3000/docs

By default, this server starts with the base OpenAPI (`swagger.json`).
After `apply`, the same `swagger.json` is updated in-place with `x-openapi-flow` entries.

### 3) Sidecar workflow

```bash
npm run init
npm run apply
npm run apply:json-example
npm run validate
npm run graph
npm run doctor
```

Workflow summary:

- `init`: reads `swagger.json` and creates `swagger-openapi-flow.json` sidecar by default.
- `apply`: merges `examples/order-openapi-flow.yaml` (or `examples/order-openapi-flow.json`) into `swagger.json` (in-place).
- `validate` and `graph`: run on `swagger.json` after apply.

## Development Notes

- Dependency `x-openapi-flow` points to `../flow-spec`.
- After making changes in the local CLI package, reinstall dependencies in this project to refresh the local link:

```bash
npm install
```
